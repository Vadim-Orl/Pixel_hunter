{"version":3,"names":[],"mappings":"","sources":["utils/loader.js"],"sourcesContent":["import GAME_DATA from '../tmp/game-data.js'\n\nconst SERVER_URL = 'http://localhost:3001';\n\n\nconst checkStatus = (response) => {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n  throw new Error(`${response.status}: ${response.statusText}`);\n}\n\nconst adaptDataForServer = (resultGame) => {\n  return {\n    isFail: resultGame.isFail,\n    resultPoints: resultGame.resultPoints,\n    results: resultGame.state.results,\n  }\n}\n\nconst toJSON = (res) => res.json();\n\nexport default class Loader {\n  static testData() {\n    return GAME_DATA;\n  }\n\n  static loadData() {\n    return window.fetch(`${SERVER_URL}/server`)\n      .then(checkStatus)\n      .then(toJSON)\n  }\n\n  static loadResult() {\n    return window.fetch(`${SERVER_URL}/stat`)\n      .then(checkStatus)\n      .then(toJSON)\n  }\n\n  static saveResults(data) {\n    const statData = adaptDataForServer(data);\n    const requestSettings = {\n      body: JSON.stringify(statData),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'POST',\n    };\n    return window.fetch(`${SERVER_URL}/stat`, requestSettings)\n      .then(checkStatus)\n  }\n}\n\n\n"],"file":"loader.js"}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJ1dGlscy9sb2FkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdBTUVfREFUQSBmcm9tICcuLi90bXAvZ2FtZS1kYXRhLmpzJ1xuXG5jb25zdCBTRVJWRVJfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cblxuY29uc3QgY2hlY2tTdGF0dXMgPSAocmVzcG9uc2UpID0+IHtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG59XG5cbmNvbnN0IGFkYXB0RGF0YUZvclNlcnZlciA9IChyZXN1bHRHYW1lKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaXNGYWlsOiByZXN1bHRHYW1lLmlzRmFpbCxcbiAgICByZXN1bHRQb2ludHM6IHJlc3VsdEdhbWUucmVzdWx0UG9pbnRzLFxuICAgIHJlc3VsdHM6IHJlc3VsdEdhbWUuc3RhdGUucmVzdWx0cyxcbiAgfVxufVxuXG5jb25zdCB0b0pTT04gPSAocmVzKSA9PiByZXMuanNvbigpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkZXIge1xuICBzdGF0aWMgdGVzdERhdGEoKSB7XG4gICAgcmV0dXJuIEdBTUVfREFUQTtcbiAgfVxuXG4gIHN0YXRpYyBsb2FkRGF0YSgpIHtcbiAgICByZXR1cm4gd2luZG93LmZldGNoKGAke1NFUlZFUl9VUkx9L3NlcnZlcmApXG4gICAgICAudGhlbihjaGVja1N0YXR1cylcbiAgICAgIC50aGVuKHRvSlNPTilcbiAgfVxuXG4gIHN0YXRpYyBsb2FkUmVzdWx0KCkge1xuICAgIHJldHVybiB3aW5kb3cuZmV0Y2goYCR7U0VSVkVSX1VSTH0vc3RhdGApXG4gICAgICAudGhlbihjaGVja1N0YXR1cylcbiAgICAgIC50aGVuKHRvSlNPTilcbiAgfVxuXG4gIHN0YXRpYyBzYXZlUmVzdWx0cyhkYXRhKSB7XG4gICAgY29uc3Qgc3RhdERhdGEgPSBhZGFwdERhdGFGb3JTZXJ2ZXIoZGF0YSk7XG4gICAgY29uc3QgcmVxdWVzdFNldHRpbmdzID0ge1xuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc3RhdERhdGEpLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIH07XG4gICAgcmV0dXJuIHdpbmRvdy5mZXRjaChgJHtTRVJWRVJfVVJMfS9zdGF0YCwgcmVxdWVzdFNldHRpbmdzKVxuICAgICAgLnRoZW4oY2hlY2tTdGF0dXMpXG4gIH1cbn1cblxuXG4iXSwiZmlsZSI6ImxvYWRlci5qcyJ9